# 第九章  安全漏洞、威胁和对策

本章涵盖的CISSP认证考试主题包括：
* 域3：安全架构和工程
	* 3.5 评估和缓解安全架构、设计和解决方案要素的漏洞
		* 3.5.1 基于客户端的系统
		* 3.5.2 基于服务端的系统
		* 3.5.3 数据库系统
		* 3.5.5 工业控制系统(ICS)
		* 3.5.6 基于云的系统
		* 3.5.7 分布式系统
		* 3.5.8 物联网(IoT)
	* 3.6 评估和缓解基于Web系统的漏洞
	* 3.7 评估和缓解移动系统的漏洞
	* 3.8 评估和缓解嵌入式系统的漏洞
		
## 9.1 评估和缓解安全漏洞

### 9.1.1 硬件
1. 处理器
	* 中央处理器单元(CPU)是控制所有主要操作的芯片。操作系统和编译器负责将用高级编程语言设计的软件转换为CPU能理解的简单汇编语言指令。
2. 执行类型
	1. 多任务处理：同时处理两个或更多任务
	2. 多核：CPU有多个可以同时运行的独立执行内核的芯片。
	3. 多处理：利用多个处理器的处理能力来完成多线程应用程序的执行。常见的多处理系统有两种类型：对称多处理系统(SMP), 大规模并行处理系统(MMP)。
	4. 多程序：通过操作系统对单个处理器上的两个任务进行协调，从而模拟两个任务同时执行的情况
		* 多程序和多任务处理的差距： 多程序通常用于大型系统上使用，多任务处理在个人计算机操作系统中使用，多任务通常由操作系统协调，多程序要求特别编写的软件
	4. 多线程处理：单个进程中执行多个并发线程，多线程的优势是降低多个线程之间转换的开销
3. 处理类型：
许多安全要求较高的系统控制着被分配不同安全级别的信息的处理任务，信息分类级别：未分类、敏感、机密、秘密和绝密。
	* 单一状态：使用策略机制来管理不同级别的信息。
	* 多状态： 这些系统经过认证，可使用专门的安全机制同时处理多个安全级别。
4. 保护机制
保护机制的三种机制：环、操作状态、安全模式。
	* 保护环，保护环将操作通中的代码和组件表示为同心环，越进入环内部，特权级别越高
		* 本质：保护环的本质在于优先权、特权和内存分割
		* 安全性：操作系统和应用程序隔离，搞特权操作系统组件和地特权操作通组件之间有严格的界限
	* 进程状态：也被叫做操作状态，指进程可能在其中运行的各种执行形式。任何给定时刻都处于两种模式之一：1：以特权、完全访问模式运行，称为监督状态；2：与用户模式相关的状态下运行，称为问题状态。
	* 进程状态的几种模式：就绪状态，等待状态，运行状态，监管状态，停止状态。
	* 新进程总是转换到就绪状态，准备好的进程如果CPU可用换到运行状态。在运行时，如果进程完成或终止，进程可以转换到停止状态；如果等待下一个时间片就返回到就绪状态；或应为I/O、资源二阻塞转换到等待状态，直到资源阻塞解除转换到运行状态。当操作系统要决定下一个运行的进程时，她会检查等待队列和就绪队列，并获取最高优先级的作业准备运行。
	* 安全模式：部署安全模式之前，必须存在三种特定元素： 
		* 分层的强制访问控制(MAC)环境
		* 对可以访问计算机控制台的主机完全物理控制
		* 对能进入计算机控制台同一房间的主体的完全物理控制
	* 专用模式：用户有下列三个要求： 
		* 每个用户必须具有允许访问系统处理的所有信息的安全许可。
		* 每个用户必须拥有系统处理的所有信息的访问批准。
		* 每个用户必须有对系统处理的所有信息具有“致其所需”权限。
	* 系统高级模式：用户必须满足的要求： 
		* 每个用户必须具有允许访问系统处理的所有信息的安全许可。
		* 每个用户必须拥有系统处理的所有信息的访问批准。
		* 每个用户必须有对系统处理的某些信息具有有效的“知其所需”权限，但不要求对系统处理的所有信息具有“致其所需”权限。
	* 分割模式：用户必须满足的要求： 
		* 每个用户必须具有允许访问系统处理的所有信息的安全许可。
		* 每个用户必须拥有系统处理的所有信息的访问批准。
		* 每个用户必须有对系统处理的某些信息具有有效的“知其所需”权限。
	* 分割模式系统和系统高级模式系统之间的主要区别在于：分割模式系统的用户不一定具有对系统上所有信息的访问批准。但系统高级模式和专用系统的相同之处在于，系统的所有用户任必须具有适当的安全许可。
	* CMW要求在客体上设置两种形式的安全标签：敏感度级别和信息标签。敏感度级别描述了必须在什么级别保护客体。信息标签可防止数据过度分类并将附加信息与对象相关联。有助于正确和准确地标记与访问控制无关的数据。
	* 多级模式：也称为受控安全模式。用户必须满足的要求： 
		* 某些用户不具有允许访问系统处理的全部信息的有效安全许可，因此，通过检查主体的许可级别是否能控制客体的敏感性标签来控制访问。
		* 每个用户必须对系统上要访问的所有信息都具有访问批准。
		* 每个用户必须对对系统上要访问的所有信息具有一个有效的“知其所需”权限。
	
![](https://i.imgur.com/HfBPlT8.jpg)

![](https://i.imgur.com/DsQVgpu.png)

5. 操作模式
	* 处理器支持两种操作模式：用户模式和特权模式 
    	* 用户模式：只允许执行其整个指令集中的部分指令，为了防止执行设计很差的代码以及无意识的滥用代码而意外损坏系统。
    	* 特权模式(监管模式、系统模式、内核模式)：操作系统能访问CPU支持的所有指令。
6. 存储器(Memory)
它时计算基用于保存需要随时可用的信息的存储库。
* 只读存储器：只能读取但是不能更改内存，子类型如下
    * 可编程只读存储器(PROM)：芯片内容没有在工厂被烧入，允许终端用户稍后烧入内容
    * 可擦除可编程只读存储器(EPROM):当使用特殊的紫外线光照射时，可以擦除芯片上的内容，之后用户可将新信息烧入EPROM
    * 电可擦除可编程只读存储器（EEPROM）：使用送到芯片引脚上的电压进行擦除，
    * 闪存：非易时性存储媒介，可进行电子擦除和重写，闪存可以以块或页的方式进行擦写
* 随机存储器（RAM）：可读可写的存储器，当电源关闭时，数据会消失，RAM有以下类型：
    * 实际存储器：计算机中可用的最大RAM存储资源
    * 高速缓存RAM：将数据从速度较慢的设备取出并暂时存储到高性能的设备上，高速缓存能提高系统的性能
* 寄存器：CPU的核心部分提供可直接访问的存储位置
* 存储器寻址：五种不同类型的寻址
    * 寄存器寻址：使用寄存器地址去访问寄存器的内容
    * 立即寻址：引用某些数据的一种方法，这些数据作为指令的一部分提供给CPU使用
    * 直接寻址：访问的存储器位置的实际地址会提供给CPU
    * 间接寻址：作为指令的一部分提供给CPU存储器，并不包括CPU用作操作的真实数值
    * 基址+偏移量寻址：使用存储在某个CPU寄存器中的数值作为开始计算的基址，然后将CPU指令提供的偏移量与基址相加，并计算得到存储位置取出操作数
* 辅助存储器：指磁性/光学介质或包含CPU不能立刻获得数据的其他存储设备
辅助存储器比实际存储器便宜，而且可以存储大量信息，硬盘、软盘和光学介质都可以当做辅助存储器
* 存储器安全问题：
围绕存储的最重要的安全问题是：计算机使用过程谁可访问存储在存储器中的数据。
7. 存储设备
	* 主存储设备：计算机用于保存运行时CPU容易获得必要信息的RAM
	* 辅助存储设备：由磁性介质和光学介质组成
* 易失性存储设备和非易失性存储设备
	* 衡量存储设备在电源被切断时丢失数据的可能性的方法
* 随机存取与顺序存取
	* 随机存储设备允许操作系统通过某些寻址系统从设备内的任何位置立刻读取数据
	* 顺序存储设备要求到达指定位置之前读取该位置之前物理存储的所有数据
8. 存储介质的安全(辅助存储设备的安全性有三个问题)
	* 显示器
	即使在数据被删除后，数据任可保留在辅助存储设备上。称为数据残留。
	* 固态硬盘SSD在净化方面有独特问题，意味着传统的零擦除作为SSD的数据安全措施是无效的。
	* 辅助存储设备容易被盗。
	* 访问存储在辅助存储设备上的数据，通常需要使用加密技术来保护他们。
	* 必须选择在能够在所需时间长度内保留数据的介质。
9. 输入和输出设备
输入和输出设备通常被视为基本的原始外围设备，
* 显示器：一种称为TEMPESTD的技术可从远处甚至从另一个位置读取每个监视器产生的电子辐射。这个过程称为Van Eck入侵。
* 打印机：如果打印机是共享的，用户可能忘记取走打印出来的敏感信息，因而容易受到窥探。需要现代打印机在本次存储数据，有些可能巫启贤保留着打印副本。有很多配置设置可用来提供一定级别的合理的安全网络打印服务，包括数据加密传输以及在和打印机交互之前先进行身份验证等。
* 键盘/鼠标：所有这些设备都容易受到TEMPESTD的技术的监控。如果键盘和鼠标是无线的(包括蓝牙)，无线电信号也可能被截获。
* 调制解调器：允许用户在网络中创建不受控制的接入点，内部人员可使用该通道把组织的数据泄露到外部。除非业务需要，否则应该在安全策略中彻底禁用调制解调器

### 9.1.2 固件
固件在某些领域中也成为微码，用于描述存储在ROM芯片中的软件的术语。这类软件改动很少。两种类型的固件：主板上的BIOS和统一的外部和内部设备固件。
1. BIOS和UEFI
	* BIOS：包含独立于操作系统的原始指令，用于启动计算基并从磁盘加载操作系统。
	* UEFI：是一种硬件和操作系统之间更高级的接口，它保留了对传统BIOS服务的支持。
2.设备固件
	* 许多硬件设备(打印机和调制解调器)的“迷你”操作系统完全包含在它们所在设备上的固件芯片中；可根据需要更新。

## 9.2 基于客户端的系统
### 9.2.1 applet
applet:代码对象被从服务器发送至客户端以便执行某些操作

* 优势 
    * 处理压力转移到客户端，从而防止服务器资源
    * 可以更快的响应对输入数据的修改
    * 正确编程的applet中，可以维护财务数据的安全和隐私性
* 安全问题：applet准许远程系统向本地系统发送执行代码
* 两个常见的applet实例：Java applet和Active X控件
		* Java applet: 优点：可以在操作系统间共享，不需要进行修改，缺点：沙盒通过JAVA减少了恶意事件的种类，但还是存在很多广泛利用的漏洞
		* Active X控件：具有操作系统的全部访问权限，能执行很多特权操作，微软后期可能要淘汰Active X
* 本地缓存：暂时存储在客户端上的任意内容，用于将来重新使用 
    * ARP缓存投毒、DNS缓存投毒、临时互联网文件或互联网文件缓存
    * 缓解本地缓安全方法：
		* 安装操作系统和应用程序补丁
		* 安装主机入侵检测系统和网络入侵检测工具定期审计日志

### 9.2.2 本地缓存
本地缓存是临时存储在客户端上一共将来重复使用的任何内容。包括：地址解析协议缓存，域名系统缓存和Internet文件缓存。
  * ARP缓存中毒是由攻击者响应ARP广播查询并返回伪造的回复造成的。两种形式：
		* ARP缓存动态内容
		* 创建静态ARP条目。
	* 执行中间人攻击的方法是通过DNS缓存中毒。包括：
		* 主机(HOSTS)中毒：攻击者将文灶的信息存储刀HOSTS文件。
		* 授权DNS服务器攻击：改变其原始主机系统(主授权DNS服务器)上FQDN的主记录。
		* 缓存DNS服务器攻击
		* DNS查找地址更改
		* DNS查询欺骗

## 9.3 基于服务端的系统
服务端关注数据流控制的问题，拒绝服务(Dos)攻击可能对数据流控制造成严重危害。

## 9.4 数据库系统安全
没有数据库安全性方面的努力，业务任务可以被中断并泄露机密信息。数据库安全性的主题包括：聚合、推理、数据挖掘、数据仓库合数据分析。

### 9.4.1 聚合
* 聚合：将一个或多个表中记录组合在一起，生成可能有用的信息
* 防止方法：严格控制对聚合函数的访问并充分评估它们可能向未经授权的人披露的潜在信息。

### 9.4.2 推理
* 推理：利用几个非敏感信息片段的组合，从而获得对应属于更高级分类的信息的访问能力
* 解决办法：对授予单个用户的权限始终保持警惕，也可故意混淆数据来防止敏感信息的推理。

### 9.4.3 数据挖掘和数据仓库
* 数据挖掘和数据仓库的意义：
	* 包含大量易受聚合和推理攻击的潜在敏感信息。安全从业者必须确保由足够的访问控制合其他安全措施来保护这些数据。
  * 数据挖掘技术开发基于异常的入侵检测系统的基线时，可以当安全工具使用。

### 9.4.4 数据分析
* 数据分析：对大批量原始数据进行检查，提取有用的信息。
* 大数据是指数据集合已经变得费城巨大，传统的分析或处理方法变得无效果、效率低下且不充分。大数据涉及的挑战包括收集、存储、分析、挖掘、传输、分发合结果呈现。

### 9.4.5 大规模并行数据系统
* 并行数据系统或并行计算是一种设计用于同时执行大量计算的计算系统。包含的概念是将大型任务划分为更小的元素，然后将每个子元素分配刀不同处理子系统进行并行计算。

## 9.5 分布式系统和端点安全
* 分布式系统结构容易出现想不到的漏洞：
	* 桌面系统包含可能存在暴漏分析的敏感信息；个人用户可能缺乏一般的安全知识或意识；通信设备也提供有害的分布式缓解入口；从互联网下载数据增加了自己和其他系统感染恶意代码、特洛伊木马的分析。
* 客户必须总受对齐内容的用户活动实施保护的措施包括：
  * 必须对电子邮件进行过滤，总受管理正当使用且限制潜在责任的政策。
  * 建立下载/上传策略。
  * 系统必须受到可靠的访问控制约束。
  * 使用受限用户界面机制并安装数据库管理系统。
  * 文件机密
  * 必须分离和隔离在用户监管模式下运行的进程。
  * 创建保护域。
  * 备份桌面计算机上的文件以及服务器上的文件。
  * 用户需要定期进行安全意识培训。
  * 台式计算以及存储介质需要防范缓解危害。
  * 桌面计算机应该在灾难恢复和业务连续性计划中。
  * 在分布式环境中使用内置和自定义软件的开发人员需要考虑使用正式开发和部署方法。如代码库、变更控制机制、配置管理以及补丁和更新部署。

### 9.5.1 基于云的系统和云计算
* 指通过网络链接在其他地方(而不是本地)执行处理和存储。
* 云计算存在问题：隐私问题、合规性困难、开源与封闭式解决方案的使用、开放标准的采用以及基于云的数据是否切实地受到保护。
* Type-Ⅰ虚拟机管理程序是原生或裸机管理程序，在次配置中，没有主机操作系统，相反，虚拟机管理程序直接安装到通常主机操作系统安装得硬件上。
* Type-Ⅱ虚拟机管理程序是托管管理程序，在这种配置中，在硬件上安装一个标准的常规OS，然后将虚拟机管理程序作为一个软件应用程序安装。
* 云的概念 
    * 平台即服务(PaaS)：提供计算平台和软件解决方案作为虚拟的或基于云的服务,提供操作系统和完整的解决方案，避免必须在本地购买和维护高端得硬件和软件。
    * 软件即服务(SaaS)：提供对特定软件应用或套件的按需在线访问而不需要本地安装，SaaS可以实现订阅服务，付费服务或免费服务
    * 基础设施即服务(IaaS)：不但提供安全操作的解决方案，还提供完全的外包选项，IaaS允许企业通过云系统快速扩展新软件或基于数据得服务/解决方案，而不必在本地安装大量硬件。
* 本地部署解决方案：传统的部署概念，组织拥有硬件、购买软件许可证，并且通常在它们自己得建筑物内操作和维护系统。成本高，本地定制化，本地完全控制。
* 托管解决方案：组织必须购买软件许可证，操作和维护软件，托管服务提供商拥有、运营和维护支持组织软件的硬件。
* 集中部署云服务的方式
    * 私有云：是企业内部网络中的云服务并与Internet隔离。私有云仅供内部使用。
    * 公有云：是一种可供公众访问的云服务。通常与Internet链接。公有云可能需要某种形式的订阅或按使用次数付费。
    * 混合云：是私有云和公有云组件的混合体。组织可以托管专用于内部使用的私有云，但会将一些资源分配到公有云，供公众；业务合作伙伴、客户、外部销售人员等使用。
    * 社区云：是由一组用户或组织维护、使用和支付用于利益共享的云环境。节省成本。
* 云解决方案通常具有较低的前期成本、较低的维护成本、供应商维护的安全性和可扩展的资源。但云解决方案不允许客户控制操作系统和软件，提供最小的定制。没有互联网时通常将无法访问。云提供商的安全策略可能与组织的安全策略不匹配。
* 云计算和虚拟化一旦敏感、机密或私有数据离开组织范围，他就离开了组织安全策略和组合的基础设置所给予的保护。必须确保云服务提供足够保护以保持合规性，加密、快照备份、补丁管理、主机的稳定性、安全测试、
* 云访问安全代理(CASB)的目标是再云解决方案和客户组织之间实施适当的安全措施。
* 安全及服务(SECaaS)：通过在线实体或由在线实体向组织提供安全性。安全组件包括：身份验证、授权、审计、反恶意软件、入侵检测、合规性和漏洞扫描、渗透测试和安全事件管理。
* 云共享责任：提供不同形式的云服务(SaaS、PasS、IaaS)不同级别或划分共享责任。SaaS解决方案将大部分管理负担置于云供应商的奸商。IaaS的责任管理更倾向于客户。再选择使用云服务时，重要的是要考虑管理、故障排除和安全管理的细节以及如何再云提供商和客户之间分配、划分或共享这些职责。

### 9.5.2 网格计算
* 是一种并行分布处理的一种形式，将大量处理节点松散的把大量处理节点组合在一起，为实现某个处理目标而工作
* 最大的安全问题是每个工作包的内容可能汇报楼给外界；工作包又是不会被返回、返回延迟或返回时以及损坏。

### 9.5.3 对等网络(P2P)
* 对等网络技术是网络和分布式应用程序的解决方案，用于在点对点实体间共享任务和工作负载，这类似于网格计算；主要区别在于P2P没有中央管理系统，并且提供服务是实时的，而不是计算能力的集合。P2P常见实例包括许多VoIP服务，如Skype、BitTorrent和Spotify。
* P2P解决方案的安全问题包括对盗版受版权保护材料的感知诱导、窃听分布式内容的能力、缺乏集中控制/监督/管理/过滤以及服务消耗所有可用带宽的可能性。

## 9.6 物联网
* 物联网通过互联网链接，以便为家庭或办公室环境中的传统或新装置或设备提供自动化、远程控制或AI处理。
* 与物联网相关的安全问题涉及访问控制和加密。一种可能的安全实施方案是将物联网设备部署再单独划分的网络中，且该网络与主网络保持独立和隔离。此配置称为三个哑路由器。

## 9.7 工业控制系统
* 工业控制系统(Industrial Control System, ICS)是一种控制工业过程和机器的计算机管理设备。
* 几种形式的ICS:
    * 分布式控制系统(DCS)、可编程逻辑控制器(PLC)、监控和数据采集(SCADA)。
* 分布式控制系统(DCS)：负责从单个位置手机数据并实施对大规模环境的控制，控制元件分布在受监控的环境中，采用模拟系统或数字系统。
* 可编程逻辑控制器(PLC)：用于各种工业化机电自动化管理与操作。
* 监控和数据采集(SCADA)：作为独立设备允许，使用机械按钮和旋钮。只有很少的人机界面。
* 工业控制系统的安全问题：攻击事件。

## 9.8 评估和缓解基于Web系统的漏洞
* 基于Web系统的漏洞包括XML和SAML相关的问题，以及开放Web应用安全项目(OWASP)中讨论的问题.
    * 任何安全评估都应从侦察或信息收开始，这一步骤是收集尽可能多的有关目标的信息，一共后续步骤使用。通常包括查看每个托管网页、发现正在使用的自动化技术、查找不应发布的信息以及检查配置和安全漏洞。
    * 然后评估站点的配置管理(例如文件处理、使用中的扩展、备份、再客户端代码中查找敏感数据)，并评估站点的传输安全性(例如检查安全套接字层(SSL)/传输层安全(TLS)版本支持，评估密码陶杰、cokkie/会话ID/令牌管理以及对伪造请求的敏感性）。
    * Web安全评估中的下一步是评估身份验证和会话管理。
    * 然后评估站点的机密以及用于数据验证和清理的方法。
    * Web安全评估还应该包括检查DoS防御、评估风险响应以及测试错误处理。
* 注入、XML利用、跨站脚本(XSS)和XSRF都属于“OWASP十大风险”之列。
* 注入攻击指允许攻击者向目标系统提交代码以便修改操作和/或损害并破坏其数据集。
* SQL注入攻击比XSS攻击风险更高。SQL注入攻击的目标是组织资产，而XSS攻击的目标是网站的客户或访问者。
* 可使用两种技术来保护Web应用程序免受SQL注入攻击：
    * 执行输入验证
    * 限制账户权限
* LDAP注入是输入注入攻击的一种变体；攻击重点是LDAP目录服务的后端。
* XML注入是SQL注入攻击的一种变体；攻击重点是XML应用程序，利用一种编程攻击的形式，用于伪造发给访问者的信息或者导致它们的系统再未经授权的情况下泄露信息。
* 跨站脚本(XSS)是一种恶意代码注入攻击形式，攻击者可攻击Web服务器并将自己的恶意代码注入发送给其他访问者的内容。可通过网关接口脚本、Web服务器软件漏洞、SQL注入攻击、帧利用、DNS重定向、cookie劫持。成功的XSS攻击可能导致身份盗窃、凭据盗窃、数据盗窃、经济损失或再来访的客户端上植入远程控制软件。
    * 针对XSS的防御包括安装补丁、Web应用程序防火墙、入侵检测系统、审计可以活动，服务器端验证输入长度，执行恶意内容和元字符过滤。
* 跨站请求伪造(XSRF)是一种类似XSS的攻击。重点是来访用户的Web服务器而不是要访问的网站，XSRF主要目的是欺骗用户或用户的浏览器执行超出预期或不被授权的操作。
    * 防御措施包括用户重新输入密码、通过短信或电子邮件向用户发送代码，或者解答CAPTCHA、检查客户端HTTP请求头应用来防止欺骗。用户允许反恶意软件扫描程序、使用入侵检测系统、运行防火墙、避免非主流网站、始终从站点注销、给浏览器打补丁、定期清除临时文件。

## 9.9 评估和缓解移动系统的漏洞
* 恶意内部员工可以通过各种存储设备把恶意代码进入内部。
* 移动设备通常包含敏感数据

### 9.9.1 设备安全
* 全设备加密：设备的大多数或所有存储介质都被加密。
* 远程擦除：远程擦除可以远程的删除设备上的所有数据甚至配置设置，恶意者可组织设备联网而触发擦除功能。使用反删除或数据恢复工具可恢复一擦除设备上的数据，为确保无法恢复，应该对设备进行加密。
* 锁定：在重复尝试后未能提供其凭据时，账户或设备将被禁用(锁定)一段时间或直到管理员清除锁定标志。
* 锁屏：防止有人随便拾起并能使用你的手机或移动设备
* GPS：通过GPS跟踪以跟踪丢失的设备
* 应用程序控制：限制可将哪些应用安装到设备上，也可以被用来强制安装特定的应用或执行某些应用的设置
* 存储分隔：人为的在存储介质上划分不同类型或数数据值
* 资产跟踪：用于维护对库存监督的管理过程。可以是主动或被动的。
* 库存控制：可以描述硬件资产跟踪，也可以指使用移动设备跟踪仓库或存储柜的库存。
* 移动设备管理(MDM)：员工用于访问公司资源的无数移动设备。目标时提高安全性、提供监控、启用远程管理以及支持故障排除。
* 设备访问控制：设备上设置强大密码，并在启用锁定时阻止蓝牙、无线或USB电缆对设备的访问
* 可移动存储：
* 关闭不使用的功能，删除那些对业务任务和个人使用无关的应用程序和禁用其他功能

### 9.9.2 应用安全
关注设备上使用的应用程序和功能
* 秘钥管理
    * 大多数密码系统问题都出在秘钥管理而不是算法上，一旦创建秘钥，尽量减少丢失或损害的方式进行存储密钥。密钥存储的最佳选择通常是可移动硬件或使用可信平台模块。
* 凭证管理：在中心位置的凭证存储被称为凭证管理
    * 凭证管理解决方案提供了一种安全存储大量的凭证集的方法。
* 身份验证：使用密码、个人身份识别码(PIN)、眼球或面部识别、扫描指纹或使用接近设备等进行身份验证。谨慎的做法是将设备验证与设备加密结合起来已阻止通过链接电缆访问存储的信息。
* 地理位置标记：具有GPS支持的移动设备在拍照时，能将地理位置以纬度和经度的形式嵌入照片中，还可嵌入拍摄日期/事件信息。可确定一个人什么时候进行正常的日常活动。
* 加密：加密是防止未授权访问数据的有效保护机制。
* 应用白名单： 禁止未授权的软件能执行的安全选项。

### 9.9.3 BYOD关注点
* BYOD(Bring Your Own Device, 自带设备)： 允许员工在工作中携带自己的个人移动设备并使用这些设备连接公司网络业务资源或互联网。
* BYOD策略的替代方案包括COPE、CYOD、企业拥有和VDI。
* 公司拥有个人启用(COPE)：指阻止购买设备并将其提供给员工。
* 自选设备(CYOD):指为用户提供已获准设备的列表，可从中选择要使用的设备。
* 企业拥有移动设备资产的战略是指公司购买符合安全策略的合规移动设备。专门用于公司用途。
* 虚拟桌面基础设备(VDI)是一种降低终端设备的安全风险和性能要求的方法。通过由用户远程访问托管在中央服务器上的虚拟机来实现。
* BYOD带来的问题： 
    * 数据所有权：提供数据隔离、分割、支持业务数据处理且不影响个人数据，需解决移动设备的备份问题。
    * 所有权支持：当员工的移动设备出现故障时，谁负责设备维修、更换或技术支持。
    * 补丁管理
    * 反病毒管理
    * 取证
    * 隐私
    * 入职/离职
    * 遵守公司策略
    * 用户接受度：只有在员工表示同意和接受后(通常需要签名)，才允许它们的设备进入生产环境。
    * 架构/基础设施考虑：在实施移动设备策略时，阻止应评估其网络和安全设计、体系结构和基础设置。
    * 法律问题
    * 可接受使用策略
    * 机载摄像头/视频

## 9.10 评估和缓解嵌入式设备和信息物理系统的漏洞
* 嵌入式系统通过计算机实现一个更大系统的一部分

### 9.10.1 嵌入式系统和静态系统的示例
* 支持网络的设备是指具有本地联网功能的任何类型的便携式或非便携设备。
* 网络物理系统指提供计算手段来控制物理世界中某些东西的设备。
* 网络物理系统、嵌入式系统和网络设备的另一种扩展是物联网（loT）。
* 大型机是高端计算机系统并用于执行高度复杂的计算和提供大容量的数据处理
* 现代大型机更灵活
* 车辆计算系统把偶偶用于见识发送机性能和优化制动、转向及悬挂的部件

### 9.10.2 安全方法
* 嵌入式系统或静态系统往往缺乏安全性且难于升级或安装补丁，安全治理的方法： 
    * 网络分段：涉及控制网络设备之间的流量，隔离完成，传输仅限于分隔网络的设备之间
    * 安全层：当不同级别分类或敏感级别的设备被分在一并于其他具有不同级别的组隔离时，就存在安全层，从而对不同级别的分组进行隔离，逻辑隔离要求数据包使用不同的分类标签，物理隔离需要实现不同安全级别网络之间的网络分割和空间隔离
    * 应用防火墙：是一种设备、服务器附件、虚拟服务或系统过滤器，定义服务和所有用户之间严格的通信规则
    * 网络防火墙：是一种硬件设备，为网络过滤而设计的装置，网络防火墙旨在为整个网络提供的广泛保护
    * 手动更新：在静态环境中使用手动更新，以确保仅执行经过测试和授权的更改，使用自动更新系统将允许未检测的更新引进未知的安全性降级。
		* 固件版本控制：固件更新应该仅在测试评审后手动。对固件版本控制的监督应侧重于维护稳定的操作平台，同时最大限度地减少停机时间或损害地风险。
		* 包装器：用于封装或包装其他内容，用于将一个良性地主机于恶意负载组合在一起。也用于封装解决方案。受控通道可以是特定地包装器。包装器包括完整性和身份验证，以确保仅将预期地和已授权的更新应用于系统。
		* 监控：将恐嵌入式和静态系统的性能、违规、合规性的运行状态。
		* 控制冗余和多样性：纵深防御以同心圆或平中使用多种类型的访问控制，通过冗余和多样性的安全控制，避免单一安全功能失效的陷阱

### 9.11 基本安全保护机制
安全机制分两部分：技术机制和策略机制
* 技术机制：系统设计人员在构建系统时可用的控件：
    * 分层：实现与用于操作系统的环模型类似的结构，并且能够应用于每一个操作系统进程，层与层之间的通信只能使用定义明确的特定接口进行，以提供必要的安全性
    * 抽象：对象的用户不一定需要知道对象的工作细节，只要使用正确的语法和作为结果返回的数据类型，抽象的另一方式是引入对象组(类).
    * 数据隐藏：多级安全系统的重要特征，能够确保某个安全级别的数据对于运行在不同安全级别的进程来说是不可见的
    * 进程隔离:要求操作系统为每个进程的指令和数据提供不同的内存空间，进程隔离的优点：防止未经授权的数据访问、保护进程的完整性
    * 硬件分隔：用于组织对属于不同进程/安全级别的信息的访问，硬件隔离通过使用物理硬件控制，进程隔离通过操作系统强加的逻辑进程隔离

### 9.11.2 安全策略与计算机架构
* 安全策略指导组织日常的安全运营、流程和过程。
* 安全策略的左右是告知和指导特定系统的设计、开发、实现、测试和维护
* 阻止信息从较高安全级别流向较低安全级别的策略被称为多级安全策略

### 9.11.3 策略机制
* 最小化特权原则
* 特权分离，职责分离可以被视为针对管理员的最小特权的应用
* 问责制：支持可问责性需要用户活动记录，可靠的审计和监控系统，灵活的授权系统和完美的身份认证系统

## 9.12 常见的架构缺陷和安全问题
安全模型和体系结构的目的是尽可能多的解决已知的缺陷

### 9.12.1 隐蔽通道
* 隐蔽通道是用于在通常不用于通信的路径是传递信息的方法，使用隐蔽通道提供了一种违反、绕过或损害安全策略而不被检测到的手段。
* 隐蔽通道类型： 
    * 时间隐蔽通道:改变系统组件的性能或改变资源的时间安来传递信息，难以检测。
    * 存储隐蔽通道:将数据写入公共存储区域来传送信息，其中另一个进程可以读取它。
* 针对隐蔽通道活动的最佳防御措施是实施审核和分析日志文件。

### 9.12.2 基于设计或编码缺陷的攻击和安全问题
* 糟糕的设计方法、有问题的实现实践和过程或者糟糕或不充分的测试，都可能导致特定的攻击。有些攻击可能是故意的设计决策导致的。
* 降低缺陷的方法：
1. 可信恢复：可信恢复确保在发生奔溃时所有的安全控制保持完整无缺。
2. 输入和参数检查：试图将恶意入侵或代码作为程序输入部分时导致的攻击类型被称为缓冲区溢出，缓冲区溢出漏洞的责任方是程序员
3. 维护钩子和特权程序：维护钩子程序是进入系统的入口点，也称为后门，可通过监控审计日志发现未经授权的管理员访问后门的行为
4. 增量攻击：攻击形式以缓慢的、渐进的增量方式发生，两种攻击形式是数据欺骗和salami攻击。
	* 攻击者获得对系统的访问权限并且在存储、处理、输入、输出或事物处理期间对数据进行细小的、随机的或增量的改变时，就会发生数据欺骗，数据欺骗是修改数据的方法，视为主动攻击
	* salami攻击，系统化的消减账户或财务就中的资产

### 9.12.3 编程
* 编程的最大的缺陷，缓冲区溢出
* 所有的程序必须经过全面测试以符合安全模型。

### 9.12.4 计时、状态改变和通信中断
* 攻击者可以根据任务执行的可预测性来开发攻击程序
* 当资源的状态或整个系统发生改变时，攻击者可以试图在两中已知的状态之间采取行动
* TOCTOU(检查时间到使用时间)攻击、竞争条件攻击和通信终端被称为状态攻击，攻击针对的是时间、数据流控制和从一个系统状态到另一个系统状态的转换。

### 9.12.5 技术和过程集成
* 随着系统的集成，应该关注潜在的单点故障以及面向服务的体系结构(SOA)中浮现出的弱点。

### 9.12.6 电磁辐射
* 通过拦截和处理来自键盘和计算机前十七的电磁辐射，甚至可重新创建键盘输入或监视器输出的数据。
* 消除电磁辐射拦截最容易的方法：通过电缆屏蔽或放入导管来降低辐射，阻止未授权的人员和设备过于靠近设备或电缆，境地信号迁都并增加敏感设备周围的物理缓冲区。
* 防止辐射窃听的技术包括法拉第笼、干扰或噪音发生器和控制区。

## 本章小结
* 安全专业人员必须重复了解运行状态(单一状态、多状态),操作模式(用户模式、监管模式、特权模式),存储类型(主存储、辅助存储、正式存储器、虚拟存储器、易失性存储器、非易失性存储器、随机存取、顺序存取)和保护机制(分层、抽象、数据隐藏、进程隔离、硬件分割、最小特权原则、特权分离、问责制)。
* 能够解释多任务、多线程、多处理和多程序设计之间的差异：多任务处理时在计算机上同时执行多个应用程序，并由操作系统管理。多线程运行在单个经常中执行多个并发任务。多处理使用多个处理器来提高计算能力。多道程序设计类似于多任务处理，但在大型机系统上进行，需要特定的编程。
* 了解单一状态处理器和多状态处理器之间的差异：单一状态处理器一次只能在一个安全级别运行，而多状态处理器可同时在多个安全级别运行。
* 描述美国联邦政府批准的用于处理机密信息的四种安全模式：专用模式要求所有用户对存储在系统上的所有信息都有适当的许可、访问权限、“致其所需”要求。系统高级模式消除了“致其所需”的要求。分隔模式消除了“致其所需”的要求和访问权限要求。多级模式消除了所有的三个要求。
* 大多数现代处理器使用的两种操作模式：用户应用程序在称为用户模式的有限制令集环境中运行。操作系统在特权模式下执行受控操作，也称为系统模式、内核模式和监管模式。
* 描述计算机使用的不同类型的内存：ROM时非易失的，不能有最终用户写入。最终用户只能将数据蟹肉PROM芯片一次。可通过使用紫外光擦除EPROM/UVERPROM芯片，然后写入新的数据。EPROM芯片可以用电流擦除，然后写入新的数据。RAM芯片是易失的，当计算机断电后其内容会丢失。
* 了解内存组件线管的安全问题：存储器组件存在一些安全问题：断电后数据可能保留在芯片上，并且控制多用户系统中的存储器访问。
* 描述计算机使用的存储设备的不同特征：主存储器与内存相同。辅助存储器由磁性、内存和光学介质组成，在CPU可使用数据之前必须先将其读入主存储器。随机存取存储设备可以在任何点读取，而顺序存取设备需要在访问所需位置之前扫描物理存储的所有数据。
* 了解关于辅助存储设备的安全问题：关于辅助存储设备存在三个主要的安全问题：可移动介质可用来窃取数据，必须应用访问控制和加密来保护数据，即使在文件删除或介质格式化之后数据也可以保留在介质上。
* 理解输入和输出设备可能带来的安全风险：输入/输出设备可能受到偷听和窃听，用于将数据带出组织。或用于创建未经授权的、不安全的进入组织系统和网络的入口点。准备好识别并缓解这些漏洞。
* 能够描述进程隔离、分层、抽象、数据隐藏和硬件分隔：进程隔离确保各个进程只能访问自己的数据。分层在一个过程中创建了不同的安全领域，并限制了它们之间的通信。抽象为程序员创建了“黑盒”接口，不必了解算法或设备的内部工作原理。数据隐藏可防止从不同的安全级别读取信息。硬件分隔使用物理控件强制执行进程隔离。
* 理解安全策略如何推动系统设计、实施、测试和部署。安全策略的作用是通知和指导某些特定系统的设计、开发、实施、测试和维护。
* 理解云计算：云计算是一种流行的术语，是计算的概念，指的是通过网络连接在其他地方而不是本地执行处理和存储的计算概念。云计算通常被认为是基于互联网的计算。
* 理解云计算和虚拟化相关的风险：云计算和虚拟化，特别是结合使用时，会产生严重风险。一旦敏感、机密或私有数据离开了组织的范围，也就离开了组织安全策略和组合的基础设施所给予的保护。云服务供应商及其人员可能不总受与你的组织相同的安全标准。
* 理解虚拟机管理程序：虚拟机管理程序(也称虚拟机监视器(VMM))是创建、管理和操作虚拟机的虚拟化组件。
* 理解Type-Ⅰ虚拟机管理程序：Type-Ⅰ虚拟机是原生或裸机管理程序，在次配置中，没有主机操作系统，相反，虚拟机管理程序直接安装到通常主机操作系统安装得硬件上。
* Type-Ⅱ虚拟机管理程序:Type-Ⅱ虚拟机管理程序是托管管理程序，在这种配置中，在硬件上安装一个标准的常规OS，然后将虚拟机管理程序作为一个软件应用程序安装。
* 定义CASB。云访问安全代理(CASB)是一种试试安全策略的解决方案，可以在本地安装也可以基于云。
* 理解SECaaS。安全既服务(SECaaS)是一个云提供商概念，其中通过在线实体或由在线实体向组织提供安全性。
* 理解职能设备：智能设备是一系列移动设备，通常通过安全应用程序为用户提供大量的自定义选项，并可利用设备上或云端的人工智能(AI)处理。
* 理解IoT。物联网(IoT)是一个新的子类别，甚至是一类新的职能设备，它们通过互联网连接，以便为家庭或办公室环境中的传统或新装置或设备提供自动化、远程控制或AI处理。
* 理解移动设备安全。设备安全性涉及可用于移动设备的一系列潜在安全选项或功能。并非所有便携式电子设备(PED)都具有良好的安全功能。PED安全功能包括全设备加密、远程擦除、锁定、锁屏、GPS、应用控制、存储分隔、资产跟踪、库存控制、移动设备管理、设备访问控制、可移动存储以及关闭不适用的功能。
* 理解移动设备应用安全。需要保护移动设备上使用的应用程序和功能。相关概念包括密钥管理、凭据管理、身份验证、地理标记、加密、应用程序白名单和可传递信任。
* 理解BYOD。BYOD(Bring Your Own Device)是一项策略，允许员工将自己的个人移动设备投入工作，并使用这些设备或通过公司网络连接到业务资源和/或互联网。尽管BYOD可提高员工士气和工作满意度，但它会增加组织的安全风险。相关问题包括数据所有权、支持所有权、补丁管理、反病毒管理、取证、隐私、入职/离职、总受公司策略、用户接受度、架构/基础架构考虑因素、法律问题、可接受的使用策略以及机载摄像头/视频。
* 理解嵌入式系统和静态环境：嵌入式系统通常是围绕一组有限的特定功能设计的，这些特定功能是预期作为组织的较大产品相关的。静态环境是为特定需求、能力或功能配置的应用程序、操作系统、硬件集或网络，然后设置为保持不变。
* 理解嵌入式系统和静态环境安全问题：静态环境、嵌入式系统和其他有限或单一用途的计算环境需要安全管理。这些技术可以包括网络分层、安全层、应用防火墙、手动更新、固件版本控制、包装器以及控制荣誉和多样性。
* 理解最小特权原则、特权分离和问责制原则如何适用于计算机体系结构：最小特权原则确保只有最少数量的进程被授权在监督模式下运行。特权分离增加了安全操作的粒度。问责制确保存在审计跟踪以及追溯操作的来源。
* 能理解什么是隐蔽通道：隐蔽通道是一种用于在通常不用于通信的路径上传递信息的方法。
* 理解缓冲区溢出和输入检查是什么：当程序员在将输入写入特定内存位置之前未能检查收入数据的大小时，会发生缓冲区溢出。事实上，任何验证输入数据的失败都可能导致全受到破坏。
* 描述安全架构的常见缺陷：除了缓冲区溢出外，程序员还可以在部署后在系统上留下后门和特权程序。即使设计很好的系统也容易受到TOCTTOU攻击的影响。任何状态更改都可能称为攻击者破坏系统的潜在机会之窗。

## 书面实验
1.列举三个标准基于云的“X即服务”选项，并简要描述它们。
* 三种标准的基于云的“X即服务”选项是平台即服务(PaaS)、软件即服务(SaaS)和基础设施即服务(IaaS)。PaaS是将计算平台和软件解决方案整合起来提供虚拟的或基于云的服务的概念。从本质上讲，这种类型的云解决方案提供了平台的所有方面(即操作系统和完整的解决方案包)。PaaS的主要吸引力在于可避免必须在本地购买和维护高端硬件和软件。SaaS是PaaS的衍生产品。SaaS提供对特定软件应用程序或套件的按需在线访问，不需要本地安装。许多情况下，本地硬件和操作系统限制很少。SaaS可实现订阅模式、即用即付服务或免费服务。IaaS将PaaS模式向前买进了一步，不仅提供按需运营解决方案，还提供完整的外包选项。这颗包括实用程序或计量计算服务、管理任务自动化、动态扩展、虚拟化服务、策略实施和管理服务以及托管/过滤的互联网连接。最终，IaaS运行企业通过云系统快速扩展新软件活鲫鱼数据的服务/解决方案，而不必在本地安装大量硬件。

2.系统处理分类信息的四种安全模式是什么？
* 四种安全模式是专用模式、系统高级模式、分隔模式和多级模式。

3.说出三对用于描述存储的方面或特性的名称。
* 用于描述存储的三对方面啊或特征是主存储设备与辅助存储设备、易失性存储设备与非易失性存储设备以及随机存取与顺序存取。

4.列出分布式体系架构中发现的一些漏洞。
* 分布式架构中的漏洞包括台式机/终端/笔记本电脑上发现的敏感数据，用户之间缺乏安全理解，物理组件被盗风险增加，对客户端的攻击可能导致对整个网络的攻击，由于用户安装的软件和可移动媒体导致恶意软件风险增加，以及客户端上的数据不太可能包含在备份中。
